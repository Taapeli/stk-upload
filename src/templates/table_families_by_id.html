{# _myapp/templates/table1.html_ #}
{% extends "layout.html" %}
{% block title %}Tiedot kannasta{% endblock %}
{% block body %}
{{ super() }}

<h2>Families data</h2>
<section id="lista">
<h3>Main person</h3>
<table>
    <tr><th>unique id</th><th>gender</th><th>firstname</th><th>suffix</th><th>surname</th>
    </tr>
{% if person %}
 	{% if person.name %}
    	{% for pname in person.name %}
    		<tr>
        		<td>{{person.uniq_id}}</td>
        		<td>{% if person.gender %}{{person.gender}}{% endif %}</td>
        		<td>{% if pname.firstname %}{{pname.firstname}}{% endif %}</td>
        		<td>{% if pname.suffix %}{{pname.suffix}}{% endif %}</td>
        		<td>{{pname.surname}}</td>
    		</tr>
		{% endfor %}
	{% else %}
		<tr>
    		<td>{{person.uniq_id}}</td>
		</tr>
	{% endif %}
{% else %}
        <tr><td colspan="1">Ei person tietoja</td></tr>
{% endif %}

</table>

<br>
<br>

<table>
    <tr><th>unique id</th><th>type</th>
    </tr>
{% if families %}
	{% for family in families %}
		<tr>
    		<td>{{family.uniq_id}}</td>
    		<td>{% if family.rel_type %}{{family.rel_type}}{% endif %}</td>
		</tr>
		{% if family.spouse_data %}
			<h3>Spouse</h3>
			<table>
			    <tr><th>unique id</th><th>gender</th><th>firstname</th><th>suffix</th><th>surname</th>
			    </tr>
			 	{% if family.spouse_data.name %}
			    	{% for pname in family.spouse_data.name %}
			    		<tr>
			        		<td><a href="/lista/family_data/{{family.spouse_data.uniq_id}}">{{family.spouse_data.uniq_id}}</a></td>
			        		<td>{% if family.spouse_data.gender %}{{family.spouse_data.gender}}{% endif %}</td>
			        		<td>{% if pname.firstname %}{{pname.firstname}}{% endif %}</td>
			        		<td>{% if pname.suffix %}{{pname.suffix}}{% endif %}</td>
			        		<td>{{pname.surname}}</td>
			    		</tr>
					{% endfor %}
				{% else %}
					<tr>
			    		<td>{{family.spouse_data.uniq_id}}</td>
			        	<td>{% if family.spouse_data.gender %}{{family.spouse_data.gender}}{% endif %}</td>
					</tr>
				{% endif %}
			</table>		
		{% endif %}

		{% if family.children_data %}
			<br>
			<br>
			<h3>Children</h3>
			<table>
			    <tr><th>unique id</th><th>gender</th><th>firstname</th><th>suffix</th><th>surname</th>
			    </tr>
				{% for child in family.children_data %}
				 	{% if child.name %}
				    	{% for pname in child.name %}
				    		<tr>
				        		<td><a href="/lista/family_data/{{child.uniq_id}}">{{child.uniq_id}}</a></td>
				        		<td>{% if child.gender %}{{child.gender}}{% endif %}</td>
				        		<td>{% if pname.firstname %}{{pname.firstname}}{% endif %}</td>
				        		<td>{% if pname.suffix %}{{pname.suffix}}{% endif %}</td>
				        		<td>{{pname.surname}}</td>
				    		</tr>
						{% endfor %}
					{% else %}
						<tr>
				    		<td>{{child.uniq_id}}</td>
				        	<td>{% if child.gender %}{{child.gender}}{% endif %}</td>
						</tr>
					{% endif %}
				{% endfor %}
			</table>		
		{% endif %}
	{% endfor %}
{% else %}
        <tr><td colspan="1">Ei family tietoja</td></tr>
{% endif %}
</table>
</section>
{% endblock %}
