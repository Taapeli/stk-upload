{# _bp/audit/templates/layout.html_ #}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fi" lang="fi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} - {{ config.STK_SYSNAME }}</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/k_screen.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/hamburger.css') }}">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script> 
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="/static/js/help.js?40"></script>
    
    <script src="https://unpkg.com/sunburst-chart"></script>
	
	<!-- i18n for Javascript: -->
	<link rel="gettext" type="application/x-po" href="/static/translations/{{ session.lang }}.po">
	<script src="/static/js/gettext.js"></script>
	<style>
h1, .startbox, .startbox2 { background-color: #f9f8bf; }
td,th {background: white;}
.tight {margin: 2pt;}
.goto {margin:3pt 12pt;}
table.transparent {
    background-color:inherit;
    border-width:0
}
table.transparent tbody tr td {
    background-color:inherit;
    border-width:0;
    vertical-align:top;
}
	</style>
  </head>

  <body>
    {% block body %}
    <h1><a href="/"><img id="logo" src="/static/tam.png" alt="{{ _('Back to Front Page') }}" title="{{ _('Back to Front Page') }}"
             onmouseover="this.src='/static/tam1.png';" 
             onmouseout="this.src='/static/tam.png';"/></a>
        <div class="curr_user"><a href="/settings" title="{{ _('My profile') }}">{{current_user.username}}</a></div>
        <i>{{ config.STK_SYSNAME }} â€“ {{ _('The Genealogical Society of Finland') }}</i></h1>
    <div id="paluu">
        <a href="/audit">{{ _('Audit home') }}</a>
    </div>
    {% endblock %}

    <div class="fullclear"></div>
    <div id="footer">
        <span id="createdate">{{ config.STK_SYSNAME }} &nbsp;
        {% if time0 %}
            {% set elapsed = time.time()-time0 %}
            <tt>time {{'%0.4f'| format(elapsed|float)}}s</tt> &nbsp;
        {% endif %}
        {% if elapsed %}
            <tt>time {{'%0.4f'| format(elapsed|float)}}s</tt> &nbsp;
        {% endif %}
        {{ _('Version') }} {{ 'app'|app_date }}</span>
    </div>
    <div class="fullclear"></div>
    
  <div id="chart" style="width:50%"></div>

  <script>
	var fanchart_data = JSON.parse('{{ fanchart_data|safe }}');
	
    Sunburst()
        .data(fanchart_data)
        .size('size')
        .color('color')
        .tooltipContent((d, node) => `<i>${d.tooltipContent}</i>`)
        .onClick((node) => {
            if (node.uuid != null) {
                var searchParams = new URLSearchParams(window.location.search);
                searchParams.set('uuid', node.uuid);
                var newParams = searchParams.toString();
                window.location.search = newParams
            }
        })
        .radiusScaleExponent(1)
        .width(600)
        (document.getElementById('chart'));
  </script>

<div id="ohjeikkuna" title="{{ _('Instructions') }}"></div>

</body></html>
