{% macro lock(value) -%}
    {# Draws a lock icon, is value is '1' #}
	{% if value == '1' %}
		<i class='fa fa-lock'></i>
	{% endif %}                           
{%- endmacro %}


{% macro stars(value) -%}
   {# Uses version 5 of fontawesome.com.  Remember to add following to your htmlpage!
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
          integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
          crossorigin="anonymous">
      Open star, regular Style (far)      f005 <i class="far fa-star"></i>
      Open half star, regular Style (far) f089 <i class="far fa-star-half"></i>
      Half-closed star, solid Style (fas) f5c0 <i class="fas fa-star-half-alt"></i>
      Closed star, solid Style (fas)      f005 <i class="fas fa-star"></i>
   #}
   {% if value < 2 %}
     {% if value == 0 %}<i class='fa fa-exclamation-circle'></i><i class='fa fa-exclamation-circle'></i>
     {% else %}<i class='fa fa-exclamation-circle'></i>{% endif %}
   {% else %}
     {% if   value < 2.25 %}
     <i class="far fa-star"></i><i class="far fa-star"></i>
     {% elif value < 2.75 %}
     <i class="far fa-star"></i></i><i class="far fa-star-half"></i>
     {% elif value < 3.25 %}
     <i class="far fa-star"></i><i class='far fa-star'></i>
     {% elif value < 3.75 %}
     <i class='far fa-star'></i><i class='far fa-star'></i><i class="far fa-star-half-alt"></i>
     {% elif value < 4.25 %}
     <i class='far fa-star'></i><i class='far fa-star'></i><i class='far fa-star'></i>
     {% elif value < 4.75 %}
     <i class='far fa-star'></i><i class='far fa-star'></i><i class='far fa-star'></i><i class="far fa-star-half-alt"></i>
     {% endif %}
   {% endif %}                           
{%- endmacro %}

{% macro menu(value) -%}
    <div class="wrapper" id="nav" role="navigation">
        <div class="container">
            <ul class="menu" id="dropmenu">
                <li{% if value == 0 %} class="CurrentSection"
                  {% endif %}><a href="/scene/persons" title="Etsi ihmisiä">{{ _("Haku") }}</a></li>
                <li{% if value == 1 %} class="CurrentSection"
                  {% endif %}><a href="/scene/persons/all" title="Kaikki henkilöt">{{ _("Ihmiset") }}</a></li>
                <li{% if value == 2 %} class="CurrentSection"
                  {% endif %}><a href="#" class="dimmed" title="Sukunimet">{{ _("Nimet") }}</a></li>
                <li{% if value == 3 %} class="CurrentSection"
                  {% endif %}><a href="#" class="dimmed" title="Perheet">{{ _("Perheet") }}</a></li>
                <li{% if value == 4 %} class="CurrentSection"
                  {% endif %}><a href="/scene/locations" title="Paikat">{{ _("Paikat") }}</a></li>
                <li{% if value == 5 %} class="CurrentSection"
                  {% endif %}><a href="/scene/sources" title="Lähteet">{{ _("Lähteet") }}</a></li>
                <li{% if value == 6 %} class="CurrentSection"
                  {% endif %}><a href="#" class="dimmed" title="Pikkukuvat">{{ _("Kuvat") }}</a></li>
            </ul>
        </div>
    </div>
{%- endmacro %}

{% macro member(ch, uniq_id, delim) -%}
    {#  Creates a Person name and link (for family tree graph). 
        Optional 'delim' can be "=" for older person page
    #}
    {% if delim != '=' %}{% set delim="/" %} <!-- Vanha person.html -sivu -->{% endif %}
    {% if ch.uniq_id == uniq_id %}
    <span class="myself">&nbsp;(itse)&nbsp;</span>
    {% else %}
    <a href="/scene/person{{delim}}{{ch.uniq_id}}" class="inlink" title="{{ _('katso henkilön') }} {{ch.id}} {{ _('tiedot') }}">
        {% if ch.names|length %}
        {{ch.names[0].firstname}} <i>{{ch.names[0].suffix}}</i> <b>{{ch.names[0].surname}}</b></a>
        {% if ch.birth_date %}s.&nbsp;{{ch.birth_date|pvm}}{% endif %}
        {% else %}{{ _("nimetön") }}
        {% endif %}
    {% endif %}
{%- endmacro %}

{% macro link_cite(citation_ref, ref_dict, unused) -%}
    {#
        Creates a Citation link (for Person page). 
        Field ref is a list of uniq_ids, which point to Citation objects 
        in ref_dict dictionary.
    #}
    <!-- {{ citation_ref|length }} lähdeviitettä, {{ ref_dict|length }} objektia -->
    {% if citation_ref %}{% set br = 0 %}
        <small>{% for ref in citation_ref %}{% if br %}<br>{% endif %}{% set br = 1 %}
          * {% if ref_dict[ref].source.repo_ref %}<i>{{ref_dict[ref].source.repo_ref[0].rname}}</i> 
            {% endif %}<a href="#sref{{ ref }}">
           {{ ref_dict[ref].source.stitle }}<br>&nbsp;&ndash; {{ ref_dict[ref].page }}</a>
        {% endfor %}</small>
    {% endif %}
{%- endmacro %}
                    
                        