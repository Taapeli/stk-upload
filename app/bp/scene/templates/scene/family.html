{# _templates/scene/person_pg.html_ #}
{% extends "/scene/layout.html" %}
{% block title %}{{ _("Family details") }}{% endblock %}
{% block body %}
{{ super() }}
{% import '/scene/macros.html' as macro with context %}
<style>
u { color: DarkKhaki; text-decoration: none; }
table {margin-top:1em;}
td { padding-right:1em;}
</style>

<div id="startdiv">
    <h2>{{ _("Family details") }}</h2>
    <!-- owner {{family.owner}}, next {{next}}, filter {{session['owner_filter']}}</small> -->
</div>

{{ macro.menu(menuno) }}
    <div class="content" id="IndividualDetail">

        <h3>{{ _("Family")|capitalize }}</h3>
        <div id="summaryarea">
            <table><tbody>
                <tr><td class="ColumnAttribute">{{ _("Identifiers") }}</td>
                    <td class="Value">{{macro.all_obj_ids(family)}}</td>
                    <td></td>
                </tr>
                <tr><td class="ColumnAttribute">{{ _("Relation") }}</td>
                    <td class="Value"> {{ family.rel_type|transl('marr') }}</td>
                    <td>{{ family.dates }}</td>
                </tr>
                <tr><td colspan="3">&nbsp;</td></tr>
            {% for p in [family.father, family.mother]%}
                {% if p %}
                <tr><td class="ColumnAttribute">{{p.role|transl('role')|capitalize}}</td>
                    <td class="Value"><span class="id">{{p.id}}</span>
                        {{ macro.person(p, uuid) }}
                    </td>
                    <td class="Value">{% if p.event_birth.dates %}&#x2606;{{ p.event_birth.dates }}{% endif %}
                                      {% if p.event_death.dates %}&#x271D;{{ p.event_death.dates }}{% endif %}
                    </td>
                </tr>
                {% endif %}
            {% endfor %}
            </tbody></table>

        {% if family.events %} 
        <h3>{{ _("Family Events") }}</h3>
        <div id="summaryarea">
            <table style="margin-top:1em;"><tbody>
        {% for e in family.events|sort(attribute='dates') %}
                <tr><td class="ColumnAttribute">{{e.type|transl('evt')|capitalize}}</td>
                    <td class="Value">{{e.dates}}</td>
                    <td class="Value"><a href="/scene/location={{e.place.uniq_id}}"
                            class="inlink">{{e.place.pname}}</a></td>
                </tr>
        {% endfor %}
            </tbody></table>
      </div>
      {% endif %}

        {% if family.children %} 
        <h3>{{ _("Children") }}</h3>
        <div id="summaryarea">
            <table style="margin-top:1em;"><tbody>
        <!-- |sort(attribute='event_birth.dates') -->
        {% for p in family.children %}
                <tr><td class="ColumnAttribute">{{p.sex|transl('child')}}</td>
                    <td class="Value"><span class="id">{{p.id}}</span>
                        {{ macro.person(p, uuid) }}
                    </td>
                    <td class="Value">{% if p.event_birth.dates %}&#x2606;{{ p.event_birth.dates }}{% endif %}
                                      {% if p.event_death.dates %}&#x271D;{{ p.event_death.dates }}{% endif %}
                    </td>
                </tr>
        {% endfor %}
            </tbody></table>
      </div>
        {% endif %}
 
        {% if family.notes %}<h3>{{ _("Notes") }}</h3>
            <table>
            {% for n in family.notes %}
 				<tr>{% if n.text %}<td>{{ n.text }}</p></td>{% endif %}
 				{% if n.url %}<td><a href="{{ n.url }}">{{ n.url }}</a></td>{% endif %}</tr>
            {% endfor %}
            </table><br>
        {% endif %}
        
        {% if family.sources %}<h3>{{ _("Sources") }}</h3>
            <table>
            {% for data in family.sources %}
         		<tr><td>{{ data[0] }}: 
         		<a href="/scene/source={{ data[1] }}" class="inlink">{{ data[2] }}</a>, {{ data[3] }}, {{ data[4] }}
         		{{ _("Page") }}: {{ data[5] }}</td></tr>
            {% endfor %}
            </table><br>
		{% endif %}

    </div>
{% endblock %}

