{# /scene/templates/scene/medias.html_ #}
{% extends "/scene/sc_layout.html" %}
{% block title %}{{ _('List of medias') }} (scenemedias){% endblock %}
{% block body %}
{{ super() }}
{% import '/scene/macros.html' as macro with context %}
<!-- script src="/static/infobox.js"></script -->

{% set cnt = medias|count %}
{% set next_fw = user_context.next_name('fw') %}
{% set next_bw = user_context.next_name('bw') %}
{% set next_at_end = user_context.at_end() %}

{#<p>next fb = "{{next_bw}}", fw = "{{next_fw}}"; 
   at start = "{{user_context.at_start() }}",
   at end = "{{user_context.at_end() }}"</p>#}
<div id="startdiv">
	<h1>{{ _('List of Medias') }}</h1>
    <div>{{ macro.show_use_case() }}</div>
</div>

{{ macro.menu(6) }}
<div class="content" id="Medias">
    <div id="summaryarea">
        <div class="flex-container">
            <div id="description_box">
                <p>{{ _('Displaying %(num)s distinct medias', num=cnt) }}
{% if user_context.at_start() %}
         		  {{ _('from begin') }}.
{% else %}		  {{ _('starting <tt>%(name)s</tt>', name=next_bw) }}.
{% endif %}
                </p>
            </div>
            <div class="SearchBox">
               <form action="/scene/medias">
                 <fieldset>
                    <input type="hidden" name="c" value="50" >
                    <label for="fw">{{ _('Go to') }}</label>
                    <input type="text" name="fw" size="8" 
                     title="{{ _('First letters of media') }}" 
                     placeholder="{{ _('Title') }}">
                    <input type="submit" value=" > ">
                 </fieldset>
               </form>
            </div>
        </div>

{% include "flash_messages.html" %}

    </div> {# summaryarea #}

        {% set last = medias|last %}
    <div id="alphanav">{% set alpha = "Â¤" %}
        <ul>
            {{ macro.buttons_bw(user_context, "/scene/medias") }}

    {% for m in medias %}
        {% set ini = m.description[0]|list|first|upper %}
        {% if loop.changed(ini) %}
                <!-- li><a href="#{{ini}}" title="{{ _('Alphabetical Menu') }}: {{ini}}">{{ini}}</a></li -->
                <li><a href="javascript:jump('{{ini}}')"
                       title="{{ _('Alphabetical Menu') }}: {{ini}}">{{ini}}</a></li>
        {% endif %}
    {% endfor %}

            {{ macro.buttons_fw(user_context, "/scene/medias") }}
        </ul>
    </div>

<section id="lista">

  <table id="medias">
    <tr><th></th>
        <th>{{ _("Title") }}</th>
        <th style="text-align: center;">{{ _("Picture") }}</th>
        <th>{{ _("References") }}</th>
    {% if user_context.is_auditor %}
        <th class="Auditor" title="{{ _('For auditor only') }}">{{ _('User Batch') }} &nbsp;</th>
    {% endif %}
    </tr>
{% if cnt %}
    {% for m in medias %}
        {% set ini = m.description[0]|list|first|upper %}
        <tr><td class="ColumnAlpha">
	            {% if loop.changed(ini) %}
	               <a id="{{ini}}" name="{{ini}}" title="{{ _('Back to Top') }}" href="#">{{ini}}</a>
                {% endif %}
                </td>
            <td><a href="/media/{{m.iid}}" class="inlink"
                   title="Media{{ macro.obj_title(m) }}">{{ m.description }}</a>
                <br>&nbsp;&nbsp;{{ macro.obj_ids(m) }}
            </td>
            <td style=" margin-left: auto; margin-right: auto;">
                <div style="text-align: center;">
	                <a href="/media/{{m.iid}}"
	                   title="{{ _('Go to media page') }}">
	                   <img alt="({{ _('Photo') }})" 
	                     src="/scene/thumbnail?id={{m.iid}}" 
	                     title="{{ _('Go to media page') }}"/>
	                </a>
            </div></td>
            <td align="center">{{m.conn}}</td>

       {% if user_context.is_auditor %}
            <td class="Auditor"><i>{{m.root.root_user}}</i><br>{{m.root.batch_id}}</td>
       {% endif %}
        </tr>
    {% endfor %}

    {% if next_at_end or not next_fw %}
        <tr><td colspan="4" id="lastitem_badge">
                <i>{{ _('The last item found') }}</i>
            </td>
        </tr>
    {% endif %}

{% else %}
	    <tr><td colspan="4">
		  <div class="NotFound">
    {% if user_context.at_start() %}
              <p>{{ _('No medias found') }}.</p>
    {% else %}
              <p>{{ _('The last item found') }}.</i>
		      <p>&nbsp;&#9656; <a href="/scene/medias?fw=%20" 
		          title="{{ _('first page') }}">{{ _("Go to the first media") }}</a></p>
    {% endif %}
		  </div></td>
	    </tr>
{% endif %}
  </table>
</section>

{% endblock %}
