{# _scene/index_scene.html_ #}
{% extends "a_layout.html" %}
{% include "security/_messages.html" %}
{% block title %}{{ _('Logged on user') }}{% endblock %}
{% block body %}
{{ super() }}

{% from "start/s_macros.html" import hamburger_menu with context %}

{{ hamburger_menu((
   ) ) }}


<div id="startdiv">
  <div>
    <h2>{{ _('Isotammi Database') }}</h2>
    {% if current_user.name %}
    <p>{{ _('User') }} <b>{{current_user.name}}</b> &lt;{{current_user.email}}&gt;
       {{ _('with roles') }} [ {% for r in current_user.roles %}{{r.name}} {% endfor %} ]<br>
       <span style="font-size:8pt; color:gray"></p>
    {% endif %}

<p><small>{{session}}</small></p>

        <div class="row">
{#  {% if current_user.is_authenticated and current_user.has_role('member') %}
           <div class="startbox">
             <div style="display: inline-block;">
               <form method="get" action="/scene/persons_all/">
                 <input name="div" type="hidden" value="2">
                 <h3>{{ _('My Candidate Family Tree') }}</h3>
                 <p>{{ _('View your own candidate material and compare with Isotammi tietokanta database') }}</p>
                 <div class="submit"> 
                    <button type="submit">{{ _('List of Persons') }}</button>
                 </div>
               </form>
            </div>
           </div>
    {% endif %}    
#} 
           <div class="startbox">
             <div style="display: inline-block;">
               <form method="get" action="/scene/persons_all/">
                 <h3>{{ _('Select Material for Browsing') }}</h3>

     {% if current_user.is_authenticated and 
        ( current_user.has_role('member') or current_user.has_role('admin') ) %}
                <p>{% set filt = session['owner_filter'] %}<br>
                  <input type="radio" name="div" value="1" 
                    {% if filt == 1 %}checked{% endif %}>Isotammi<br>
                  <input type="radio" name="div" value="2" 
                    {% if filt == 2 or filt == 3 %}checked{% endif %}>{{ _('My candidate material') }}<br>
                  <input type="radio" name="div" value="4" style="cursor:not-allowed" 
                    {% if filt == 4 or filt == 5 %}checked{% endif %}>{{ _('Selected set of material') }}<br>
                  &nbsp;&nbsp;&#9492;&#9472; <input type="checkbox" name="cmp" value="1"  
                    {% if filt == 3 or filt == 5 %}checked{% endif %}>
                        {{ _('Compare to Isotammi Database') }} 
                </p>
     {% else %}
                <p>{{ _('You can view only approved and public material in Isotammi Database') }}.</p>
                <input name="div" type="hidden" value="1">
     {% endif %}
                <div class="submit"> 
                    <button type="submit">{{ _('List of Persons') }}</button>
                 </div>
               </form>
{#
	<!-- 
	owner_filter  001 1 = common Suomikanta data
	              010 2 = user's own candidate data
	              100 4 = data from specific batch
	              011 3 = 1+2 = users data & Suomikanta
	              101 5 = 1+4 = user batch & Suomikanta
	 -->
                   <p>Tietojoukko {% set filt = session['owner_filter'] %} {{filt}}
                       {% if session['owner_filter'] == 1 or filt == 3 or filt == 5 %}Suomikanta{% endif %}
                       {% if session['owner_filter'] == 2 or filt == 3 %}omat{% endif %}
                       {% if session['owner_filter'] == 4 or filt == 5 %}tuontier√§{% endif %}</p>
#}
            </div>
           </div>


    {% if current_user.is_authenticated and 
        ( current_user.has_role('member') or current_user.has_role('admin') ) %}
     <div class="startbox">
         <h3>{{ _('Table format tools') }}</h3>
         <p>{{ _('A variety of more technical listings and problem solving tools.') }}
         {{ _('The data includes accepted and candidate materials of all users.') }}
         </p>
         <form method="get" action="/tables">
            <div class="submit"> 
               <button type="submit">{{ _('Explore the database') }}</button>
            </div>
         </form>
     </div>
     {% endif %}

 {#  <div class="startbox">
       <div style="display: inline-block;">
         <h3>{{ _('Message to Maintenance') }}</h3>
         <p>{{ _("Request a researcher's rights or send another message to the maintenance") }}</p>
         {{ _('Function still planned') }}
         <div class="submit"> 
           <button type="button" disabled>{{ _('Compose a message') }}</button>
         </div>
       </div>
     </div>

     {% if current_user.is_authenticated %}
     <div class="startbox">
       <h3>{{ _('Log out') }}</h3>
       <p>{{ _('Ending the session') }}<br>&nbsp;</p>
    <form method="get" action="/logout">
          <div class="submit"> 
	<button type="submit" style="color: blue">{{ _('Exit the Application') }}</button>
          </div>
    </form>
     </div>
     {% endif %}
 #}
    </div>
  </div>
</div>
{% endblock %}
