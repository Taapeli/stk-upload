{# start/s_macros.html #}

{% macro hamburger_menu(items) -%}
    {# Hamburger menu in top right corner.
        You may adjust position by by re-defining css top and right values of
        #menuToggle top and right and #menu margin-top.
    #}
    {% if not config['DEMO'] %}
	<nav role="navigation" >
	{# https://codepen.io/erikterwan/pen/EVzeRP #}
	{# items is a list of tuples (url, label, hover title) 
	   example: items = (("/message", _('Contact administrator'), _('Message to the administrator')), 
	                      ... ) 
	#}
	  <div id="menuToggle">
	    <input type="checkbox" />
	    <span></span><span></span><span></span>
	    <ul id="menu">
          <a href="/" title="{{ _('Start page') }}"><li>{{ _('Home') }}</li></a>

{#        <a href="/scene/persons/search" title="{{ _('Browse database') }}">
            <li>{{ _('Go to search page') }}</li></a>
	      <a id="help" href="#" title="{{ _('Instructions for this page') }}" 
	      	language="{{ session.lang }}" target="_blank">
	        <li>{{ _('Help') }}</li></a>
#}
	       <a href="/message" title="{{_('Message to the administrator')}}" target="_blank">
	        <li>{{_('Contact administrator')}}</li></a>

	       <a href="/settings" title="{{_('User profile settings')}}">
	        <li>{{ _('My home page')}}</li></a>

	    {% for url, label, title in items %}
	       <a href="{{url}}" title="{{title}}">
	        <li>{{label}}</li></a>
	    {% endfor %}

	    {% if current_user is defined and current_user.is_anonymous %}
          <a href="/login" title="{{ _('Log in to this application') }}">
            <li><b>{{ _('Log in') }}</b></li></a>
	    {% else %}
          <a href="/logout" title="{{ _('Log out from this application') }}">
            <li><b>{{ _('Logout') }}</b></li></a>
	    {% endif %}
	    </ul>
	  </div>
	</nav>
	{% endif %}
{%- endmacro %}

{% macro state_info() -%}

	<div class="tooltip"> &nbsp;ℹ&nbsp;
		<div class="tooltiptext">
		  	<p><b>{{ _("Processing steps of Isotammi material") }}</b></p>
		  	<ul style="margin: 0 1em 1em 1em;">
<!-- 		   <li><b>{{ _("File") }}</b> – {{ _("The file has been uploaded to server") }}</li> -->
		  	   <li><b>{{ _("Storing") }}</b>  – {{ _("Converting the Gramps file to the database") }}</li>
               <li><b>{{ _("Candidate") }}</b> – {{ _("The data is stored as candidate material") }}</li>
               <li><b>{{ _("Audit Requested") }}</b> – {{ _("Waiting for audition") }}</li>
               <li><b>{{ _("Auditing") }}</b> – {{ _("In audition") }}</li>
		  	   <li><b>{{ _("Accepted") }}</b>  – {{ _("Audit done") }}</li>
		  	   <li><b>{{ _("Merged") }}</b>  – {{ _("Joined to common data") }}</li>
		  	   <li><b>{{ _("Rejected") }}</b> – {{ _("Returned to researcher with comments") }}</li>
			</ul>
		</div>
	</div>

{%- endmacro %}

{% macro show_advance(batch) -%}
	{# Show a row of state badges with current emphasized. #}
	{% set state_n = batch.state_number() %}
            <div><b>{{ _("State ") }}:</b>
            </div>
            <div title='{{ _("Converting the Gramps file to the database") }}'
    {% if state_n > 10 %}class="states done">
    {% elif state_n == 10 %}class="states act">
    {% else %}class="states">
    {% endif -%}
               {{ _("Storing") }}</div>

    {% if state_n == 6 %}
            <div title='{{ _("Error in data upload") }}'
    			 class="states fail">
               {{ _("Load Failed") }}</div>
    {% endif %}

            <div title='{{ _("The data is stored as candidate material") }}'
    {% if state_n > 20 %}class="states done"
    {% elif state_n == 20 %}class="states act"
    {% else %}class="states"{% endif -%}>
               {{ _("Candidate") }}</div>
            <div title='{{ _("Waiting for audition") }}'
    {% if state_n > 30 %}class="states done"
    {% elif state_n == 30 %}class="states act"
    {% else %}class="states"{% endif -%}>
               {{ _("Audit Requested") }}</div>
            <div title='{{ _("In audition") }}'
    {% if state_n > 40 %}class="states done"
    {% elif state_n == 40 %}class="states act"
    {% else %}class="states"{% endif -%}>
               {{ _("Auditing") }}</div>
            <div title='{{ _("Audit done") }}'
    {% if state_n > 60 %}class="states done"
    {% elif state_n == 60 %}class="states act"
    {% else %}class="states"{% endif -%}>
               {{ _("Accepted") }}</div>
            <div title='{{ _("Returned to researcher with comments") }}'
    {% if state_n > 61 %}class="states done"
    {% elif state_n == 61 %}class="states act"
    {% else %}class="states"{% endif -%}>
               {{ _("Rejected") }}</div>
{%- endmacro %}

