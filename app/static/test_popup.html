<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="/static/css/k_screen.css" media="screen">
<link rel="stylesheet" type="text/css" href="/static/css/popup.css">
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script></head>
<script src="/static/js/axios.min.js"></script>
<body>
<style>
.popuptext a.inlink {
    background: #666;
    color:white;
}
.row div { display: inline-block; }
</style>

<h2>Popup</h2>
<p style="margin:4em;">&nbsp;</p>
<table>
<td class="ColumnPerson">
    <div>
        <div class="detail_link" alt="549094">♂ <a href="/scene/person?uuid=034454cf72af445088845d390d1390f0"
            class="inlink" title="Katso henkilön 034454 tiedot (nr. 549094)">Anders Reinhold <i>Andersson</i>  <b></b></a>
            <div class="popup" onclick="myFunction()">⭐
               <span class="popuptext" id="popWin" title="perhe F0249">
                        <p><a href="/scene/family?uuid=e8450bbbd48348338abce8b900df3bf8" title="e8450bbbd48348338abce8b900df3bf8" class="inlink">
                             Perhe avioliitossa</a>
                           3.12.1820</p>
	                    <ul>
	                        <li>Mies: 
    <a href="/scene/person?uuid=ea28f1c846714c4dbfb337e61fe770ad" class="inlink" title="Katso henkilön ea28f1 tiedot (nr. 548956)">
    Anders <i>Jacobsson</i>  <b></b></a> s.&nbsp;19.11.1762
    </li>
	                        <li>Vaimo: 
    <a href="/scene/person?uuid=f8bb4c555aae46f6ba44f4fbaa11608f" class="inlink" title="Katso henkilön f8bb4c tiedot (nr. 548968)">
    Maria <i>Johansdotter</i>  <b></b></a> s.&nbsp;26.9.1787
    </li>
	                        <li>Lapset<ul>
	                            <li>Poika: 
    <a href="/scene/person?uuid=36a1081bbb394f969abf9e4b8890c98f" class="inlink" title="Katso henkilön 36a108 tiedot (nr. 549096)">
    Jonas <i>Andersson</i>  <b></b></a> s.&nbsp;15.8.1825
    </li>
	                            <li>Tytär: 
    <a href="/scene/person?uuid=9a34f8ec4f4b432d9158e61222c1c30d" class="inlink" title="Katso henkilön 9a34f8 tiedot (nr. 549082)">
    Carolina Ulrica <i>Andersdotter</i>  <b></b></a> s.&nbsp;7.6.1822
    </li>
	                            <li>Poika: 
    <span class="myself">&nbsp;(itse)&nbsp;</span>
    </li>
	                        </ul></li>
	                    </ul>
	                </div>
                </div>
            </div>
               </span>
            </div>
        </div>
        <br>
        <span class="idno">Uuid:034454 /</span>
        <span class="id" title="Alkuperäinen tunniste">I2090</span>
    </div>
</td>
<td class="ColumnEvent">
    <div>
        <div class="eventgrid">
            <div class="col col_event"><span class="evtype major">syntymä</span></div>
            <div class="col col_date">15.8.1825 | Perttala</div>
        </div>
        <div class="eventgrid">
            <div class="col col_event"><span class="evtype minor">kaste</span></div>
            <div class="col col_date">16.8.1825  | Taivassalon srk</div>
        </div>
        <div class="eventgrid">
            <div class="col col_event"><span class="evtype minor">ammatti</span> renki</div>
            <div class="col col_date">1844 – 1846 | Punttinen</div>
        </div>
        <div class="eventgrid">
            <div class="col col_event"><span class="evtype minor">ammatti</span> renki</div>
            <div class="col col_date">1844 | Munkki</div>
        </div>
        <div class="eventgrid">
            <div class="col col_event"><span class="evtype minor">ammatti</span> renki</div>
            <div class="col col_date">1846 | Keskitalo</div>
        </div>
        <div class="eventgrid">
            <div class="col col_event"><span class="evtype major">kuolema</span></div>
            <div class="col col_date">8.12.1846 | Keskitalo</div>
        </div>
    </div>
</td>
</table>

<div class="popup" onclick="myFunction()">Click ⭐ to toggle the popup!
  <span class="popuptext" id="popWin">A Simple Popup!</span>
</div>

<hr>
<div id="app">
  <div class="row">
    <div>
        <span>${ message }</span>
        <button v-on:click="reverseMessage">Reverse Message</button>
      
        <input type="button" id="search" value="Haku" 
          v-on:click="getFamilies(uuid='e8450bbbd48348338abce8b900df3bf8')">
    </div>
    <div style="display: inline-block;">
        ${status} – Family
        <span style="background:white; padding:3px;">&nbsp;
            <tt>${id}</tt> ${rel_type} ${dates[1]}
            <i>${father_sortname} <> ${mother_sortname}</i>&nbsp;</span>
    </div>
  </div>
</div>
</body>
</html>

<script>
// When the user clicks on div, open the popup
function myFunction() {
  var popup = document.getElementById("popWin");
  popup.classList.toggle("show");
}

var app = new Vue({
   el: '#app',
   delimiters: ['${', '}'],
   data: {
     message: 'Hello Vue!',
     rel_type: '',
     id: 'F',
     father_sortname: 'father',
     mother_sortname: 'mother',
     dates: [-1, "?", ""],
     uuid:'_',
     status: 'Not run'
   },
   methods: {
	   getFamilies(uuid) {
	       axios
	       .post("/scene/json/families", {uuid:uuid})
	       .then (function(rsp) {
	    			   app.status = rsp.status;
                       app.id = rsp.data.rsp.id;
                       app.rel_type = rsp.data.rsp.rel_type;
                       app.dates = rsp.data.rsp.dates;
                       app.father_sortname = rsp.data.rsp.father_sortname;
                       app.mother_sortname = rsp.data.rsp.mother_sortname;
                       console.log( rsp.data );
	    			   //app.rel_type = rsp.rel_type;
    			 })
	   },

// 	           axios.get('/scene/json/families?uuid=' + uuid).
//            then(function(rsp, status) {
//         	   app.status = status;
//                app.names = rsp.data.records;
               //app.selected = [];
               //app.lastquery = q;
//            });
		   //console.log(uuid);

       reverseMessage: function () {
     	  this.message = this.message.split('').reverse().join('')
   	   }
  }
})
</script>
