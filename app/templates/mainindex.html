{# templates/mainindex.html_ #}
{% extends "a_layout.html" %}
{% include "security/_messages.html" %}
{% block title %}{{ _('Logged on user') }}{% endblock %}
{% block body %}
{{ super() }}


<div id="startdiv">
  <div>
    <h2>{{ _('Welcome to Finland Database') }}, {{current_user.username}}</h2>
    <p>{{ _('User') }} <b>{{current_user.name}}</b> &lt;{{current_user.email}}&gt;
       {{ _('roles:') }} [ {% for r in current_user.roles %}{{r.name}} {% endfor %} ]<br>
       <span style="font-size:8pt; color:gray">{{ _('Git Application Version' ) }} 
          <i>{{ 'git'|app_date }}</i></span></p>

    <div class="row">
       <div class="startbox">
         <div style="display: inline-block;">
           <form method="get" action="/scene/persons_own/">
             <h3>{{ _('My Family Tree') }}</h3>
             <p>{{ _('View your own candidate material and compare with Suomi tietokanta database') }}</p>
             <div class="submit"> 
                <button type="submit">{{ _('List of Persons') }}</button>
             </div>
           </form>
        </div>
       </div>

    {% if current_user.is_authenticated and current_user.has_role('member') %}
       <div class="startbox">
         <div style="display: inline-block;">
            <h3>{{ _('Send data to server') }}</h3>
              <form action="/gramps/upload" method="post"  enctype="multipart/form-data">
             <div style="display: inline-block;">
               <input type="hidden" name="material" value="xml_file">
               <p>{{ _('Select Gramps XML File (*. gramps) to become candidate material') }}</p>
               <input type="file" name="filenm" />
             </div>
                <div class="submit"> 
               <input type="submit" value="{{ _('Upload') }}" />
             </div>
             </form>
             â–¸ <a href=/gramps/uploads>{{ _("List uploads") }}</a>
         </div>
     </div>{% endif %}

     <div class="startbox">
        <div style="display: inline-block;">
        <form method="get" action="/gedcom/list">
           <h3>{{ _('My gedcom material') }}</h3>
           <p>{{ _('Upload your material in gedcom format or edit an already stored') }}</p>
          <div class="submit"> 
             <button type="submit">{{ _('Gedcom handlings') }}</button>
          </div>
        </form>
        </div>
     </div>

    {% if current_user.is_authenticated and 
        ( current_user.has_role('member') or current_user.has_role('admin') ) %}
     <div class="startbox">
         <h3>{{ _('Data Views as tables') }}</h3>
         <p>{{ _('On the next page there are a variety of more technical listings and problem solving tools') }}
         </p>
         <form method="get" action="/tables">
            <div class="submit"> 
               <button type="submit">{{ _('Explore the database') }}</button>
            </div>
         </form>
     </div>
    {% endif %}

     <div class="startbox">
       <div style="display: inline-block;">
         <h3>{{ _('Message to Maintenance') }}</h3>
         <p>{{ _("Request a researcher's rights or send another message to the maintenance") }}</p>
         {{ _('Function still planned') }}
         <div class="submit"> 
           <button type="button" disabled>{{ _('Compose a message') }}</button>
         </div>
       </div>
     </div>

        {% if current_user.is_authenticated and 
            (current_user.has_role('admin')  or current_user.has_role('master') ) %}
     <div class="startbox admin">
       <div style="display: inline-block;">
<h3>{{ _('Admin function') }}</h3>
         <p>{{ _('Admin function') }}: <br/>
            {{ _('User and reference information management and database service tasks') }}
         </p>
         <form method="get" action="/admin">
            <div class="submit"> 
               <button type="submit">{{ _('Maintenance') }}</button>
            </div>
         </form>
      </div>
     </div>{% endif %}

     {% if current_user.is_authenticated %}
     <div class="startbox">
       <h3>{{ _('Log out') }}</h3>
       <p>{{ _('Ending the session') }}<br>&nbsp;</p>
    <form method="get" action="/logout">
          <div class="submit"> 
	<button type="submit" style="color: blue">{{ _('Exit the Application') }}</button>
          </div>
 </form>
     </div>
     {% endif %}
    </div>
  </div>
</div>
{% endblock %}
